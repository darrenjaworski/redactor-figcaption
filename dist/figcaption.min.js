if(!RedactorPlugins)var RedactorPlugins={};!function(t){RedactorPlugins.figcaption=function(){return{init:function(){this.modal.addCallback("imageEdit",t.proxy(this.figcaption.imageEdit,this))},imageEdit:function(){function a(){var t=i.val(),a=n.siblings("figcaption").length;t?a?(n.attr("data-caption",i.val()),n.siblings("figcaption").html(i.val())):(n.attr("data-caption",i.val()),n.wrap("<figure></figure>"),n.after("<figcaption>"+i.val()+"</figcaption>")):a&&(n.unwrap(),n.siblings("figcaption").remove())}var i=t(document.createElement("input")).attr("type","text").attr("name","caption"),n=t("#redactor-image-box").children("img"),e=n.attr("data-caption");e?i.val(e):i.attr("placeholder","Caption placeholder."),t("#redactor-modal-body > section").append([t(document.createElement("label")).attr("for","redactor-caption").text("Caption"),i]),t("#redactor-modal").click(function(i){t(i.target).hasClass("redactor-modal-action-btn")&&a()})}}}}(jQuery);